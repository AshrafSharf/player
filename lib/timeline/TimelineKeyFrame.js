/**
 * TimelineFrame holds 3 list of FrameCommands
 *  - list1 _frameCommands should be  executed when playing the timeline (previous Frame was played)
 *  - list2 _frameCommandsReverse should be executed when playing the timeline reversed (previous Frame was played)
 *  - list3 _frameCommandsInit should be executed when jumping to a frame, so we need to fully init the frame
 *
 *  Addionial TimelineFrame properties are:
 *  - script - can be executed, after the frameCommands have been executed
 *  - list of FrameLabels, and list of corresponding labelTypes
 *  - duration-value (1 frame is not necessary 1 frame long)
 *  - startTime and endTime are needed internally when deciding what frame to display
 */
var TimelineKeyFrame = (function () {
    function TimelineKeyFrame() {
        this._duration = 1; //use millisecs for duration ? or frames ?
        this._frameCommands = new Array();
        this._frameConstructCommands = new Array();
        this._frameDestructCommands = new Array();
        this._isActive = false;
    }
    TimelineKeyFrame.prototype.addCommand = function (command) {
        // make the timeline available for the commands
        this._frameCommands.push(command);
    };
    TimelineKeyFrame.prototype.addConstructCommand = function (command) {
        // make the timeline available for the commands
        this._frameConstructCommands.push(command);
    };
    TimelineKeyFrame.prototype.addDestructCommand = function (command) {
        // make the timeline available for the commands
        this._frameDestructCommands.push(command);
    };
    Object.defineProperty(TimelineKeyFrame.prototype, "startTime", {
        get: function () {
            return this._startTime;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimelineKeyFrame.prototype, "duration", {
        get: function () {
            return this._duration;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimelineKeyFrame.prototype, "endTime", {
        get: function () {
            return this._endTime;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TimelineKeyFrame.prototype, "isActive", {
        get: function () {
            return this._isActive;
        },
        enumerable: true,
        configurable: true
    });
    TimelineKeyFrame.prototype.setFrameTime = function (startTime, duration) {
        this._startTime = startTime;
        this._duration = duration;
        this._endTime = startTime + duration;
    };
    TimelineKeyFrame.prototype.activate = function (sourceMovieClip) {
        this._isActive = true;
        var len = this._frameConstructCommands.length;
        for (var i = 0; i < len; i++)
            this._frameConstructCommands[i].execute(sourceMovieClip, this._startTime);
    };
    TimelineKeyFrame.prototype.deactivate = function (sourceMovieClip) {
        this._isActive = false;
        var len = this._frameDestructCommands.length;
        var endTime = this._duration + this._startTime;
        for (var i = 0; i < len; i++)
            this._frameDestructCommands[i].execute(sourceMovieClip, endTime);
    };
    TimelineKeyFrame.prototype.update = function (sourceMovieClip, time) {
        var len = this._frameCommands.length;
        for (var i = 0; i < len; i++)
            this._frameCommands[i].execute(sourceMovieClip, time);
    };
    return TimelineKeyFrame;
})();
module.exports = TimelineKeyFrame;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1wbGF5ZXIvbGliL3RpbWVsaW5lL1RpbWVsaW5lS2V5RnJhbWUudHMiXSwibmFtZXMiOlsiVGltZWxpbmVLZXlGcmFtZSIsIlRpbWVsaW5lS2V5RnJhbWUuY29uc3RydWN0b3IiLCJUaW1lbGluZUtleUZyYW1lLmFkZENvbW1hbmQiLCJUaW1lbGluZUtleUZyYW1lLmFkZENvbnN0cnVjdENvbW1hbmQiLCJUaW1lbGluZUtleUZyYW1lLmFkZERlc3RydWN0Q29tbWFuZCIsIlRpbWVsaW5lS2V5RnJhbWUuc3RhcnRUaW1lIiwiVGltZWxpbmVLZXlGcmFtZS5kdXJhdGlvbiIsIlRpbWVsaW5lS2V5RnJhbWUuZW5kVGltZSIsIlRpbWVsaW5lS2V5RnJhbWUuaXNBY3RpdmUiLCJUaW1lbGluZUtleUZyYW1lLnNldEZyYW1lVGltZSIsIlRpbWVsaW5lS2V5RnJhbWUuYWN0aXZhdGUiLCJUaW1lbGluZUtleUZyYW1lLmRlYWN0aXZhdGUiLCJUaW1lbGluZUtleUZyYW1lLnVwZGF0ZSJdLCJtYXBwaW5ncyI6IkFBbUJBLEFBWUE7Ozs7Ozs7Ozs7O0dBREc7SUFDRyxnQkFBZ0I7SUFVbEJBLFNBVkVBLGdCQUFnQkE7UUFZZEMsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsQ0FBQ0EsRUFBQ0EsMENBQTBDQTtRQUM3REEsSUFBSUEsQ0FBQ0EsY0FBY0EsR0FBR0EsSUFBSUEsS0FBS0EsRUFBZ0JBLENBQUNBO1FBQ2hEQSxJQUFJQSxDQUFDQSx1QkFBdUJBLEdBQUdBLElBQUlBLEtBQUtBLEVBQWdCQSxDQUFDQTtRQUN6REEsSUFBSUEsQ0FBQ0Esc0JBQXNCQSxHQUFHQSxJQUFJQSxLQUFLQSxFQUFnQkEsQ0FBQ0E7UUFDeERBLElBQUlBLENBQUNBLFNBQVNBLEdBQUdBLEtBQUtBLENBQUNBO0lBQzNCQSxDQUFDQTtJQUVNRCxxQ0FBVUEsR0FBakJBLFVBQWtCQSxPQUFvQkE7UUFFbENFLEFBQ0FBLCtDQUQrQ0E7UUFDL0NBLElBQUlBLENBQUNBLGNBQWNBLENB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LEVBQUVBLENBQUNBLEdBQUdBLEdBQUdBLEVBQUVBLENBQUNBLEVBQUVBO1lBQ3hCQSxJQUFJQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxlQUFlQSxFQUFFQSxJQUFJQSxDQUFDQSxDQUFDQTtJQUM5REEsQ0FBQ0E7SUFDTFosdUJBQUNBO0FBQURBLENBMUZBLEFBMEZDQSxJQUFBO0FBRUQsQUFBMEIsaUJBQWpCLGdCQUFnQixDQUFDIiwiZmlsZSI6InRpbWVsaW5lL1RpbWVsaW5lS2V5RnJhbWUuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE1hdHJpeDNEICAgICAgICAgICAgICAgICAgICAgICAgPSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2dlb20vTWF0cml4M0RcIik7XHJcbmltcG9ydCBNYXRyaXggICAgICAgICAgICAgICAgICAgICAgICA9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9NYXRyaXhcIik7XHJcbmltcG9ydCBTdWJHZW9tZXRyeUJhc2UgICAgICAgICAgICAgICAgPSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL2RhdGEvU3ViR2VvbWV0cnlCYXNlXCIpO1xyXG5pbXBvcnQgU3ViR2VvbWV0cnkgICAgICAgICAgICAgICAgICAgID0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9kYXRhL1RyaWFuZ2xlU3ViR2VvbWV0cnlcIik7XHJcbmltcG9ydCBHZW9tZXRyeSAgICAgICAgICAgICAgICAgICAgICAgID0gcmVxdWlyZShcImF3YXlqcy1jb3JlL2xpYi9kYXRhL0dlb21ldHJ5XCIpO1xyXG5pbXBvcnQgR2VvbWV0cnlFdmVudCAgICAgICAgICAgICAgICA9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZXZlbnRzL0dlb21ldHJ5RXZlbnRcIik7XHJcblxyXG5pbXBvcnQgSUFuaW1hdG9yICAgICAgICAgICAgICAgICAgICA9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvYW5pbWF0b3JzL0lBbmltYXRvclwiKTtcclxuaW1wb3J0IElTdWJNZXNoICAgICAgICAgICAgICAgICAgICAgICAgPSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2Jhc2UvSVN1Yk1lc2hcIik7XHJcbmltcG9ydCBJU3ViTWVzaENsYXNzICAgICAgICAgICAgICAgID0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9iYXNlL0lTdWJNZXNoQ2xhc3NcIik7XHJcbmltcG9ydCBNYXRlcmlhbEJhc2UgICAgICAgICAgICAgICAgICAgID0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9tYXRlcmlhbHMvTWF0ZXJpYWxCYXNlXCIpO1xyXG5pbXBvcnQgRW50aXR5Tm9kZSAgICAgICAgICAgICAgICAgICAgPSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL3BhcnRpdGlvbi9FbnRpdHlOb2RlXCIpO1xyXG5pbXBvcnQgSVJlbmRlcmVyICAgICAgICAgICAgICAgICAgICA9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvcmVuZGVyL0lSZW5kZXJlclwiKTtcclxuaW1wb3J0IERpc3BsYXlPYmplY3RDb250YWluZXIgICAgICAgID0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9jb250YWluZXJzL0Rpc3BsYXlPYmplY3RDb250YWluZXJcIik7XHJcbmltcG9ydCBNZXNoICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9lbnRpdGllcy9NZXNoXCIpO1xyXG5pbXBvcnQgTW92aWVDbGlwICAgICAgICAgICAgICAgICAgICA9IHJlcXVpcmUoXCJhd2F5anMtcGxheWVyL2xpYi9kaXNwbGF5L01vdmllQ2xpcFwiKTtcclxuaW1wb3J0IEZyYW1lQ29tbWFuZCAgICAgICAgICAgICAgICAgPSByZXF1aXJlKFwiYXdheWpzLXBsYXllci9saWIvdGltZWxpbmUvY29tbWFuZHMvRnJhbWVDb21tYW5kXCIpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBUaW1lbGluZUZyYW1lIGhvbGRzIDMgbGlzdCBvZiBGcmFtZUNvbW1hbmRzXHJcbiAqICAtIGxpc3QxIF9mcmFtZUNvbW1hbmRzIHNob3VsZCBiZSAgZXhlY3V0ZWQgd2hlbiBwbGF5aW5nIHRoZSB0aW1lbGluZSAocHJldmlvdXMgRnJhbWUgd2FzIHBsYXllZClcclxuICogIC0gbGlzdDIgX2ZyYW1lQ29tbWFuZHNSZXZlcnNlIHNob3VsZCBiZSBleGVjdXRlZCB3aGVuIHBsYXlpbmcgdGhlIHRpbWVsaW5lIHJldmVyc2VkIChwcmV2aW91cyBGcmFtZSB3YXMgcGxheWVkKVxyXG4gKiAgLSBsaXN0MyBfZnJhbWVDb21tYW5kc0luaXQgc2hvdWxkIGJlIGV4ZWN1dGVkIHdoZW4ganVtcGluZyB0byBhIGZyYW1lLCBzbyB3ZSBuZWVkIHRvIGZ1bGx5IGluaXQgdGhlIGZyYW1lXHJcbiAqXHJcbiAqICBBZGRpb25pYWwgVGltZWxpbmVGcmFtZSBwcm9wZXJ0aWVzIGFyZTpcclxuICogIC0gc2NyaXB0IC0gY2FuIGJlIGV4ZWN1dGVkLCBhZnRlciB0aGUgZnJhbWVDb21tYW5kcyBoYXZlIGJlZW4gZXhlY3V0ZWRcclxuICogIC0gbGlzdCBvZiBGcmFtZUxhYmVscywgYW5kIGxpc3Qgb2YgY29ycmVzcG9uZGluZyBsYWJlbFR5cGVzXHJcbiAqICAtIGR1cmF0aW9uLXZhbHVlICgxIGZyYW1lIGlzIG5vdCBuZWNlc3NhcnkgMSBmcmFtZSBsb25nKVxyXG4gKiAgLSBzdGFydFRpbWUgYW5kIGVuZFRpbWUgYXJlIG5lZWRlZCBpbnRlcm5hbGx5IHdoZW4gZGVjaWRpbmcgd2hhdCBmcmFtZSB0byBkaXNwbGF5XHJcbiAqL1xyXG5jbGFzcyBUaW1lbGluZUtleUZyYW1lXHJcbntcclxuICAgIHByaXZhdGUgX3N0YXJ0VGltZTpudW1iZXI7XHJcbiAgICBwcml2YXRlIF9lbmRUaW1lOm51bWJlcjtcclxuICAgIHByaXZhdGUgX2R1cmF0aW9uOm51bWJlcjtcclxuICAgIHByaXZhdGUgX2ZyYW1lQ29tbWFuZHM6QXJyYXk8RnJhbWVDb21tYW5kPjtcclxuICAgIHByaXZhdGUgX2ZyYW1lQ29uc3RydWN0Q29tbWFuZHM6QXJyYXk8RnJhbWVDb21tYW5kPjtcclxuICAgIHByaXZhdGUgX2ZyYW1lRGVzdHJ1Y3RDb21tYW5kczpBcnJheTxGcmFtZUNvbW1hbmQ+O1xyXG4gICAgcHJpdmF0ZSBfaXNBY3RpdmU6Ym9vbGVhbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5fZHVyYXRpb24gPSAxOy8vdXNlIG1pbGxpc2VjcyBmb3IgZHVyYXRpb24gPyBvciBmcmFtZXMgP1xyXG4gICAgICAgIHRoaXMuX2ZyYW1lQ29tbWFuZHMgPSBuZXcgQXJyYXk8RnJhbWVDb21tYW5kPigpO1xyXG4gICAgICAgIHRoaXMuX2ZyYW1lQ29uc3RydWN0Q29tbWFuZHMgPSBuZXcgQXJyYXk8RnJhbWVDb21tYW5kPigpO1xyXG4gICAgICAgIHRoaXMuX2ZyYW1lRGVzdHJ1Y3RDb21tYW5kcyA9IG5ldyBBcnJheTxGcmFtZUNvbW1hbmQ+KCk7XHJcbiAgICAgICAgdGhpcy5faXNBY3RpdmUgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkQ29tbWFuZChjb21tYW5kOkZyYW1lQ29tbWFuZClcclxuICAgIHtcclxuICAgICAgICAvLyBtYWtlIHRoZSB0aW1lbGluZSBhdmFpbGFibGUgZm9yIHRoZSBjb21tYW5kc1xyXG4gICAgICAgIHRoaXMuX2ZyYW1lQ29tbWFuZHMucHVzaChjb21tYW5kKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkQ29uc3RydWN0Q29tbWFuZChjb21tYW5kOkZyYW1lQ29tbWFuZClcclxuICAgIHtcclxuICAgICAgICAvLyBtYWtlIHRoZSB0aW1lbGluZSBhdmFpbGFibGUgZm9yIHRoZSBjb21tYW5kc1xyXG4gICAgICAgIHRoaXMuX2ZyYW1lQ29uc3RydWN0Q29tbWFuZHMucHVzaChjb21tYW5kKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkRGVzdHJ1Y3RDb21tYW5kKGNvbW1hbmQ6RnJhbWVDb21tYW5kKVxyXG4gICAge1xyXG4gICAgICAgIC8vIG1ha2UgdGhlIHRpbWVsaW5lIGF2YWlsYWJsZSBmb3IgdGhlIGNvbW1hbmRzXHJcbiAgICAgICAgdGhpcy5fZnJhbWVEZXN0cnVjdENvbW1hbmRzLnB1c2goY29tbWFuZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBzdGFydFRpbWUoKTpudW1iZXJcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RhcnRUaW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgZHVyYXRpb24oKTpudW1iZXJcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZHVyYXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBlbmRUaW1lKCk6bnVtYmVyXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuZFRpbWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBpc0FjdGl2ZSgpOmJvb2xlYW5cclxuICAgIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNBY3RpdmU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEZyYW1lVGltZShzdGFydFRpbWU6bnVtYmVyLCBkdXJhdGlvbjpudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5fc3RhcnRUaW1lID0gc3RhcnRUaW1lO1xyXG4gICAgICAgIHRoaXMuX2R1cmF0aW9uID0gZHVyYXRpb247XHJcbiAgICAgICAgdGhpcy5fZW5kVGltZSA9IHN0YXJ0VGltZSArIGR1cmF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhY3RpdmF0ZShzb3VyY2VNb3ZpZUNsaXA6TW92aWVDbGlwKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuX2lzQWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB2YXIgbGVuID0gdGhpcy5fZnJhbWVDb25zdHJ1Y3RDb21tYW5kcy5sZW5ndGg7XHJcbiAgICAgICAgLy8gcmF0aGVyIHBvaW50bGVzcyB0byBwYXNzIHRpbWUgaW5mbyBoZXJlXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKylcclxuICAgICAgICAgICAgdGhpcy5fZnJhbWVDb25zdHJ1Y3RDb21tYW5kc1tpXS5leGVjdXRlKHNvdXJjZU1vdmllQ2xpcCwgdGhpcy5fc3RhcnRUaW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVhY3RpdmF0ZShzb3VyY2VNb3ZpZUNsaXA6TW92aWVDbGlwKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuX2lzQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMuX2ZyYW1lRGVzdHJ1Y3RDb21tYW5kcy5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGVuZFRpbWUgPSB0aGlzLl9kdXJhdGlvbiArIHRoaXMuX3N0YXJ0VGltZTtcclxuICAgICAgICAvLyByYXRoZXIgcG9pbnRsZXNzIHRvIHBhc3MgdGltZSBpbmZvIGhlcmVcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKVxyXG4gICAgICAgICAgICB0aGlzLl9mcmFtZURlc3RydWN0Q29tbWFuZHNbaV0uZXhlY3V0ZShzb3VyY2VNb3ZpZUNsaXAsIGVuZFRpbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoc291cmNlTW92aWVDbGlwOk1vdmllQ2xpcCwgdGltZTpudW1iZXIpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMuX2ZyYW1lQ29tbWFuZHMubGVuZ3RoO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKVxyXG4gICAgICAgICAgICB0aGlzLl9mcmFtZUNvbW1hbmRzW2ldLmV4ZWN1dGUoc291cmNlTW92aWVDbGlwLCB0aW1lKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0ID0gVGltZWxpbmVLZXlGcmFtZTtcclxuIl19