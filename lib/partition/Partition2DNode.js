var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var DisplayObjectContainer = require("awayjs-display/lib/containers/DisplayObjectContainer");
var NodeBase = require("awayjs-display/lib/partition/NodeBase");
var Partition2DNode = (function (_super) {
    __extends(Partition2DNode, _super);
    function Partition2DNode(root) {
        _super.call(this);
        this._root = root;
    }
    Partition2DNode.prototype.acceptTraverser = function (traverser) {
        if (traverser.enterNode(this)) {
            this.traverseSceneGraph(this._root, traverser);
        }
    };
    // pass any so we can convert to IEntity. Sigh, TypeScript.
    Partition2DNode.prototype.traverseSceneGraph = function (displayObject, traverser) {
        // typechecking is nasty, but we have little choice:
        if (displayObject instanceof DisplayObjectContainer)
            this.traverseChildren(displayObject, traverser);
        // (typechecking an interface doesn't work, ie "displayObject instanceof IEntity" is impossible)
        if (displayObject._iCollectRenderables) {
            var entity = (displayObject);
            entity["node2D"].acceptTraverser(traverser);
        }
    };
    Partition2DNode.prototype.traverseChildren = function (container, traverser) {
        var len = container.numChildren;
        for (var i = 0; i < len; ++i)
            this.traverseSceneGraph(container.getChildAt(i), traverser);
    };
    Partition2DNode.prototype.iAddNode = function (node) {
        _super.prototype.iAddNode.call(this, node);
        // HORRIBLE:
        var entityNode = (node);
        entityNode.entity["node2D"] = node;
    };
    return Partition2DNode;
})(NodeBase);
module.exports = Partition2DNode;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1wbGF5ZXIvbGliL3BhcnRpdGlvbi9QYXJ0aXRpb24yRE5vZGUudHMiXSwibmFtZXMiOlsiUGFydGl0aW9uMkROb2RlIiwiUGFydGl0aW9uMkROb2RlLmNvbnN0cnVjdG9yIiwiUGFydGl0aW9uMkROb2RlLmFjY2VwdFRyYXZlcnNlciIsIlBhcnRpdGlvbjJETm9kZS50cmF2ZXJzZVNjZW5lR3JhcGgiLCJQYXJ0aXRpb24yRE5vZGUudHJhdmVyc2VDaGlsZHJlbiIsIlBhcnRpdGlvbjJETm9kZS5pQWRkTm9kZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBR0EsSUFBTyxzQkFBc0IsV0FBVyxzREFBc0QsQ0FBQyxDQUFDO0FBQ2hHLElBQU8sUUFBUSxXQUFXLHVDQUF1QyxDQUFDLENBQUM7QUFHbkUsSUFBTSxlQUFlO0lBQVNBLFVBQXhCQSxlQUFlQSxVQUFpQkE7SUFJbENBLFNBSkVBLGVBQWVBLENBSUxBLElBQWtCQTtRQUUxQkMsaUJBQU9BLENBQUNBO1FBQ1JBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLENBQUNBO0lBQ3RCQSxDQUFDQTtJQUVNRCx5Q0FBZUEsR0FBdEJBLFVBQXVCQSxTQUF1QkE7UUFFMUNFLEVBQUVBLENBQUNBLENBQUNBLFNBQVNBLENBQUNBLFNBQVNBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQzVCQSxJQUFJQSxDQUFDQSxrQkFBa0JBLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLEVBQUVBLFNBQVNBLENBQUNBLENBQUNBO1FBQ25EQSxDQUFDQTtJQUNMQSxDQUFDQTtJQUVERiwyREFBMkRBO0lBQ3BEQSw0Q0FBa0JBLEdBQXpCQSxVQUEwQkEsYUFBaUJBLEVBQUVBLFNBQXVCQTtRQUVoRUcsQUFDQUEsb0RBRG9EQTtRQUNwREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsYUFBYUEsWUFBWUEsc0JBQXNCQSxDQUFDQTtZQUNoREEsSUFBSUEsQ0FBQ0EsZ0JBQWdCQSxDQUF5QkEsYUFBYUEsRUFBRUEsU0FBU0EsQ0FBQ0EsQ0FBQ0E7UUFFNUVBLEFBQ0FBLGdHQURnR0E7UUFDaEdBLEVBQUVBLENBQUNBLENBQUNBLGFBQWFBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDckNBLElBQUlBLE1BQU1BLEdBQVlBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBO1lBQ3RDQSxNQUFNQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQSxlQUFlQSxDQUFDQSxTQUFTQSxDQUFDQSxDQUFDQTtRQUNoREEsQ0FBQ0E7SUFDTEEsQ0FBQ0E7SUFFT0gsMENBQWdCQSxHQUF4QkEsVUFBeUJBLFNBQWdDQSxFQUFFQSxTQUF1QkE7UUFFOUVJLElBQUlBLEdBQUdBLEdBQUdBLFNBQVNBLENBQUNBLFdBQVdBLENBQUNBO1FBRWhDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxHQUFHQSxFQUFFQSxFQUFFQSxDQUFDQTtZQUN4QkEsSUFBSUEsQ0FBQ0Esa0JBQWtCQSxDQUFDQSxTQUFTQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxTQUFTQSxDQUFDQSxDQUFDQTtJQUNwRUEsQ0FBQ0E7SUFFTUosa0NBQVFBLEdBQWZBLFVBQWdCQSxJQUFhQTtRQUV6QkssZ0JBQUtBLENBQUNBLFFBQVFBLFlBQUNBLElBQUlBLENBQUNBLENBQUNBO1FBQ3JCQSxBQUNBQSxZQURZQTtZQUNSQSxVQUFVQSxHQUFlQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtRQUNwQ0EsVUFBVUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsR0FBR0EsSUFBSUEsQ0FBQ0E7SUFDdkNBLENBQUNBO0lBQ0xMLHNCQUFDQTtBQUFEQSxDQTlDQSxBQThDQ0EsRUE5QzZCLFFBQVEsRUE4Q3JDO0FBQ0QsQUFBeUIsaUJBQWhCLGVBQWUsQ0FBQyIsImZpbGUiOiJwYXJ0aXRpb24vUGFydGl0aW9uMkROb2RlLmpzIiwic291cmNlUm9vdCI6Ii4uLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb2xsZWN0b3JCYXNlID0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi90cmF2ZXJzZS9Db2xsZWN0b3JCYXNlXCIpO1xyXG5pbXBvcnQgRGlzcGxheU9iamVjdCA9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvYmFzZS9EaXNwbGF5T2JqZWN0XCIpO1xyXG5pbXBvcnQgSUVudGl0eSA9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvZW50aXRpZXMvSUVudGl0eVwiKTtcclxuaW1wb3J0IERpc3BsYXlPYmplY3RDb250YWluZXIgPSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2NvbnRhaW5lcnMvRGlzcGxheU9iamVjdENvbnRhaW5lclwiKTtcclxuaW1wb3J0IE5vZGVCYXNlID0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9wYXJ0aXRpb24vTm9kZUJhc2VcIik7XHJcbmltcG9ydCBFbnRpdHlOb2RlID0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9wYXJ0aXRpb24vRW50aXR5Tm9kZVwiKTtcclxuXHJcbmNsYXNzIFBhcnRpdGlvbjJETm9kZSBleHRlbmRzIE5vZGVCYXNlXHJcbntcclxuICAgIHByaXZhdGUgX3Jvb3QgOiBEaXNwbGF5T2JqZWN0O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHJvb3Q6RGlzcGxheU9iamVjdClcclxuICAgIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuX3Jvb3QgPSByb290O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhY2NlcHRUcmF2ZXJzZXIodHJhdmVyc2VyOkNvbGxlY3RvckJhc2UpXHJcbiAgICB7XHJcbiAgICAgICAgaWYgKHRyYXZlcnNlci5lbnRlck5vZGUodGhpcykpIHtcclxuICAgICAgICAgICAgdGhpcy50cmF2ZXJzZVNjZW5lR3JhcGgodGhpcy5fcm9vdCwgdHJhdmVyc2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcGFzcyBhbnkgc28gd2UgY2FuIGNvbnZlcnQgdG8gSUVudGl0eS4gU2lnaCwgVHlwZVNjcmlwdC5cclxuICAgIHB1YmxpYyB0cmF2ZXJzZVNjZW5lR3JhcGgoZGlzcGxheU9iamVjdDphbnksIHRyYXZlcnNlcjpDb2xsZWN0b3JCYXNlKVxyXG4gICAge1xyXG4gICAgICAgIC8vIHR5cGVjaGVja2luZyBpcyBuYXN0eSwgYnV0IHdlIGhhdmUgbGl0dGxlIGNob2ljZTpcclxuICAgICAgICBpZiAoZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIERpc3BsYXlPYmplY3RDb250YWluZXIpXHJcbiAgICAgICAgICAgIHRoaXMudHJhdmVyc2VDaGlsZHJlbig8RGlzcGxheU9iamVjdENvbnRhaW5lcj5kaXNwbGF5T2JqZWN0LCB0cmF2ZXJzZXIpO1xyXG5cclxuICAgICAgICAvLyAodHlwZWNoZWNraW5nIGFuIGludGVyZmFjZSBkb2Vzbid0IHdvcmssIGllIFwiZGlzcGxheU9iamVjdCBpbnN0YW5jZW9mIElFbnRpdHlcIiBpcyBpbXBvc3NpYmxlKVxyXG4gICAgICAgIGlmIChkaXNwbGF5T2JqZWN0Ll9pQ29sbGVjdFJlbmRlcmFibGVzKSB7XHJcbiAgICAgICAgICAgIHZhciBlbnRpdHkgPSA8SUVudGl0eT4oZGlzcGxheU9iamVjdCk7XHJcbiAgICAgICAgICAgIGVudGl0eVtcIm5vZGUyRFwiXS5hY2NlcHRUcmF2ZXJzZXIodHJhdmVyc2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0cmF2ZXJzZUNoaWxkcmVuKGNvbnRhaW5lcjpEaXNwbGF5T2JqZWN0Q29udGFpbmVyLCB0cmF2ZXJzZXI6Q29sbGVjdG9yQmFzZSlcclxuICAgIHtcclxuICAgICAgICB2YXIgbGVuID0gY29udGFpbmVyLm51bUNoaWxkcmVuO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKVxyXG4gICAgICAgICAgICB0aGlzLnRyYXZlcnNlU2NlbmVHcmFwaChjb250YWluZXIuZ2V0Q2hpbGRBdChpKSwgdHJhdmVyc2VyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaUFkZE5vZGUobm9kZTpOb2RlQmFzZSlcclxuICAgIHtcclxuICAgICAgICBzdXBlci5pQWRkTm9kZShub2RlKTtcclxuICAgICAgICAvLyBIT1JSSUJMRTpcclxuICAgICAgICB2YXIgZW50aXR5Tm9kZSA9IDxFbnRpdHlOb2RlPihub2RlKTtcclxuICAgICAgICBlbnRpdHlOb2RlLmVudGl0eVtcIm5vZGUyRFwiXSA9IG5vZGU7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0ID0gUGFydGl0aW9uMkROb2RlOyJdfQ==